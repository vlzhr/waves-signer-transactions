(this.webpackJsonpmasstransfer=this.webpackJsonpmasstransfer||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},130:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},139:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){var r={"./config-mainnet.json":221,"./config-testnet.json":222};function c(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}c.keys=function(){return Object.keys(r)},c.resolve=a,e.exports=c,c.id=220},221:function(e){e.exports=JSON.parse('{"nodeUrl":"https://nodes.waves.exchange","signerClientUrl":"https://waves.exchange/signer","explorerUrl":"https://wavesexplorer.com","dataServicesUrl":"https://waves.exchange/api/v1"}')},222:function(e){e.exports=JSON.parse('{"nodeUrl":"https://nodes-testnet.wavesnodes.com","signerClientUrl":"https://testnet.waves.exchange/signer","explorerUrl":"https://testnet.wavesexplorer.com","dataServicesUrl":"https://testnet.waves.exchange/api/v1"}')},223:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(49),s=n.n(a),o=(n(127),n(128),n(19)),i=n.n(o),l=n(31),u=n(71),j=n(7),d=(n(130),n(1)),b=function(e){var t=e.children,n=e.priority,r=void 0===n?2:n,c=e.className;"h".concat(r);return Object(d.jsx)("h2",{className:"title ".concat(c),children:t})},f=(n(132),n(51)),p=(n(133),["children","variant","className"]),h=function(e){var t=e.children,n=e.variant,r=e.className,c=Object(f.a)(e,p);return Object(d.jsx)("button",Object(l.a)(Object(l.a)({className:"btn btn_".concat(n," ").concat(r)},c),{},{children:t}))},O=function(e){var t=e.title,n=e.handleLogout,r=e.children,c=e.onConfirm,a=e.confirmText,s=void 0===a?"Confirm":a;return Object(d.jsxs)("form",{className:"tx-form",children:[Object(d.jsxs)("div",{className:"space-between",children:[Object(d.jsx)(b,{children:t}),n&&Object(d.jsx)(h,{variant:"transparent",onClick:function(e){e.preventDefault(),n()},children:"Log Out"})]}),r,Object(d.jsx)(h,{className:"big",variant:"primary",onClick:c,children:s})]})},v=(n(134),function(e){var t=e.balances,n=e.onSelect,c=r.useState(!1),a=Object(j.a)(c,2),s=a[0],o=a[1],i=r.useState([]),l=Object(j.a)(i,2),u=l[0],b=l[1],f=r.useRef(),p=r.useMemo((function(){return Object.values(t).sort((function(e,t){return e.asset.hasImage?-1:0}))}),[t]),h=r.useCallback((function(e){e.preventDefault();var t=e.target.value.trim();console.log("%c value","color: #e5b6ed",t);var n=p.filter((function(e){var n;return e.asset.name.toLowerCase().includes(t.toLowerCase())||(null===(n=e.asset.ticker)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))||e.asset.id.toLowerCase().includes(t.toLowerCase())}));b(n)}),[p]);Object(r.useEffect)((function(){b(p)}),[p]);var O,v;return O=function(){o(!1)},v=f,Object(r.useEffect)((function(){var e=function(e){v.current&&!v.current.contains(e.target)&&O(e)};return v.current&&document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[O,v]),Object(d.jsxs)("div",{className:"search-asset-container",ref:f,children:[Object(d.jsxs)("div",{className:"search-input-wrapper",children:[Object(d.jsx)("input",{onChange:h,className:"search-input input",type:"text",placeholder:"Type asset name"}),Object(d.jsx)("button",{className:"search-input-arrow ".concat(s?"active":""),onClick:function(e){e.preventDefault(),o(!s)}})]}),s&&Object(d.jsx)("ul",{className:"search-input-dropdown",children:u.map((function(e){return Object(d.jsxs)("li",{className:"search-input-dropdown__item",onClick:function(){return n(e)},children:[Object(d.jsxs)("div",{className:"search-input-dropdown__meta-wrapper",children:[Object(d.jsx)("span",{className:"search-input-dropdown__asset-icon",style:{backgroundImage:"url('".concat(e.asset.icon,"')")}}),Object(d.jsx)("span",{className:"search-input-dropdown__asset-ticker",children:e.asset.ticker||e.asset.name}),Object(d.jsx)("span",{className:"search-input-dropdown__asset-name",children:e.asset.displayName})]}),Object(d.jsx)("div",{children:e.toFormat()})]},e.asset.id)}))})]})}),m=n(105),x=n(23),g=function(e,t){var n=Object(r.useState)([]),c=Object(j.a)(n,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){if(e&&t){var n,r,c=function(e){var t=Object.create(null);return e.forEach((function(e){if(!e.length)return null;var n=e.map((function(e){return e.replace(/\s/g,"").replace(/"/g,"")})),r=Object(j.a)(n,2),c=r[0],a=r[1];if(!c||!a)return null;t[c]||(t[c]=[]),t[c].push(a)})),t}(Object(m.parse)(e||"").data),o=[];Object.keys(c).forEach((function(e){var n=c[e].map((function(e){try{return function(e){var t=e.replace(new RegExp("\\,","g"),"").replace(new RegExp("\\."),".").replace(",",".");return/^([0-9]+\.)?[0-9]+$/.test(t)?new x.BigNumber(t):new x.BigNumber(0)}(e)}catch(t){return new x.BigNumber(0)}})).reduce((function(e,t){return e.add(t)})),r=t.cloneWithTokens(n);o.push({recipient:e,amount:r})})),r=o,(n=a).length===r.length&&n.every((function(e,t){return e.recipient===r[t].recipient&&e.amount.eq(r[t].amount)}))||s(o)}}),[e,a]),{transfers:a}},w=function(e){var t=e.handleLogout,n=e.balances,c=e.signer,a=r.useState(),s=Object(j.a)(a,2),o=s[0],i=s[1],l=r.useState(""),u=Object(j.a)(l,2),b=u[0],f=u[1],p=r.useCallback((function(e){e.preventDefault(),f(e.target.value)}),[n]),h=r.useCallback((function(e){i(e)}),[]),m=r.useCallback((function(){c.massTransfer({transfers:[{recipient:"w",amount:1}],assetId:o.asset.id,attachment:null})}),[o]);g(b,o);return Object(d.jsxs)(O,{title:"Mass Transfer",handleLogout:t,onConfirm:m,confirmText:"Transfer",children:[Object(d.jsxs)("div",{className:"form__row",children:[Object(d.jsx)("label",{className:"form__label",children:"Select Asset"}),Object(d.jsx)(v,{balances:n,onSelect:h})]}),Object(d.jsxs)("div",{className:"form__row",children:[Object(d.jsxs)("div",{className:"space-between",children:[Object(d.jsx)("label",{className:"form__label",children:"Recipients, Amounts: 0/100"}),Object(d.jsx)("span",{className:"link",children:"Import CSV File"})]}),Object(d.jsx)("textarea",{className:"input textarea",placeholder:"Use a comma to separate recipient and the amount to send. Use\na new line for each recipient. \nExample:\nAddress1,Amount1\nAlias2,Amount2",onChange:p})]}),Object(d.jsx)("div",{children:"error"})]})},N=n(106),C=n(107),k=(n(139),function(e){var t=e.onSelect;e.onClose;return Object(d.jsxs)("form",{className:"login-container",children:[Object(d.jsx)(b,{className:"login-title",children:"Connect wallet"}),Object(d.jsxs)("div",{className:"buttons-wrapper",children:[Object(d.jsx)("button",{className:"login-btn storage",onClick:function(e){e.preventDefault(),t(C.a)},children:"Waves Exchange Storage"}),Object(d.jsx)("button",{className:"login-btn email",onClick:function(e){e.preventDefault(),t(N.a)},children:"Email Account"})]})]})}),S=n(108),_=Object(r.createContext)({nodeUrl:"",signerClientUrl:"",explorerUrl:"",dataServicesUrl:""});_.displayName="ConfigContext";var U=_.Provider,E=n(122),y=(n(219),["onClose","children"]),L=c.a.createContext(null),A=function(e){var t=e.children,n=Object(r.useRef)(null),c=Object(r.useState)(null),a=Object(j.a)(c,2),s=a[0],o=a[1];return Object(r.useEffect)((function(){n.current&&o(n.current)}),[n.current]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(L.Provider,{value:s,children:t}),Object(d.jsx)("div",{ref:n})]})},T=function(e){e.onClose;var t=e.children,n=(Object(f.a)(e,y),Object(r.useContext)(L));return n?s.a.createPortal(Object(d.jsx)("div",{className:"overlay",children:Object(d.jsx)("div",{className:"dialog",children:t})}),n):null},D=function(e){var t=Object(r.useContext)(_),n=Object(r.useState)(null),c=Object(j.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)(""),b=Object(j.a)(o,2),f=b[0],p=b[1],h=Object(r.useState)(),O=Object(j.a)(h,2),v=(O[0],O[1]),m=Object(r.useState)(null),x=Object(j.a)(m,2),g=x[0],N=(x[1],Object(r.useState)(!0)),C=Object(j.a)(N,2),U=C[0],y=C[1],L=function(e,t){var n=Object(r.useState)({}),c=Object(j.a)(n,2),a=c[0],s=c[1],o=Object(r.useContext)(_);return Object(r.useEffect)((function(){t&&new E.Balance({address:t,updateBalancesMs:5e3,dataServicesUrl:"https://waves.exchange/api/v1",nodeUrl:o.nodeUrl}).onUpdate((function(e){console.log("%c balances","color: #e5b6ed",e),s(e)}))}),[t]),{userBalances:a}}(0,f).userBalances;console.log("%c config","color: #e5b6ed",t);var A=Object(r.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),p(""),(r=a||new S.Signer({NODE_URL:t.nodeUrl})).setProvider(new n),s(r),e.prev=5,e.next=8,r.login();case 8:return c=e.sent,p(c.address),g&&g.res(Object(l.a)(Object(l.a)({},c),{},{signer:r})),y(!1),e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(5),g&&g.rej(),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),[a,g]),D=Object(r.useCallback)(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),a){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,a.logout();case 6:p(""),s(null),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[a]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(w,{handleLogout:D,balances:L,signer:a}),U&&Object(d.jsx)(T,{onClose:function(){return y(!1)},children:Object(d.jsx)(k,{onSelect:A,onClose:function(){return y(!1)}})})]})},B=n(220)("./config-".concat(process.env.REACT_APP_NETWORK||"mainnet",".json"));var R=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(A,{children:Object(d.jsx)(U,{value:B,children:Object(d.jsx)(D,{})})})})};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(R,{})}),document.getElementById("root"))},58:function(e,t){}},[[223,1,2]]]);
//# sourceMappingURL=main.6c848f52.chunk.js.map