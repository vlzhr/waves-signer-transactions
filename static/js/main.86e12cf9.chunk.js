(this.webpackJsonpmasstransfer=this.webpackJsonpmasstransfer||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},275:function(e,t,n){},326:function(e,t,n){},327:function(e){e.exports=JSON.parse('{"nodeUrl":"https://nodes.waves.exchange","signerClientUrl":"https://waves.exchange/signer","explorerUrl":"https://wavesexplorer.com","dataServicesUrl":"https://waves.exchange/api/v1","iconServiceUrl":"https://waves.exchange/static/icons/assets"}')},328:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(67),s=n.n(r),i=(n(176),n(177),n(20)),l=n.n(i),o=n(30),u=n(53),j=n(6),b=(n(179),n(1)),d=function(e){var t=e.children,n=e.priority,a=void 0===n?2:n,c=e.className;"h".concat(a);return Object(b.jsx)("h2",{className:"title ".concat(c),children:t})},f=(n(181),n(69)),O=(n(182),["children","variant","className"]),p=function(e){var t=e.children,n=e.variant,a=e.className,c=Object(f.a)(e,O);return Object(b.jsx)("button",Object(o.a)(Object(o.a)({className:"btn btn_".concat(n," ").concat(a)},c),{},{children:t}))},m=function(e){var t=e.title,n=e.handleLogout,a=e.children;e.onConfirm,e.confirmText;return Object(b.jsxs)("form",{className:"tx-form",children:[Object(b.jsxs)("div",{className:"space-between",children:[Object(b.jsx)(d,{children:t}),n&&Object(b.jsx)(p,{variant:"transparent",onClick:function(e){e.preventDefault(),n()},children:"Log Out"})]}),a]})},h=(n(183),function(e){var t=e.balance,n=e.onSelectItem,a=e.className,c=e.inInput,r=void 0!==c&&c;return Object(b.jsxs)("li",{className:"search-input-dropdown__item ".concat(a),onClick:function(){n&&n(t)},children:[Object(b.jsxs)("div",{className:"search-input-dropdown__meta-wrapper",children:[Object(b.jsx)("span",{className:"search-input-dropdown__asset-icon",style:{backgroundImage:"url('".concat(t.asset.icon,"')")}}),Object(b.jsx)("span",{className:"search-input-dropdown__asset-ticker",children:t.asset.ticker||t.asset.name}),Object(b.jsx)("span",{className:"search-input-dropdown__asset-name",children:t.asset.displayName})]}),!r&&Object(b.jsx)("div",{children:t.toFormat()})]},t.asset.id)}),v=function(e){var t=e.balances,n=e.onSelect,c=a.useState(),r=Object(j.a)(c,2),s=r[0],i=r[1],l=a.useState(!1),o=Object(j.a)(l,2),u=o[0],d=o[1],f=a.useState([]),O=Object(j.a)(f,2),p=O[0],m=O[1],v=a.useState(!1),x=Object(j.a)(v,2),g=x[0],N=x[1],w=a.useState(""),C=Object(j.a)(w,2),S=C[0],k=C[1],_=a.useRef(),U=a.useMemo((function(){return Object.values(t).sort((function(e,t){return e.asset.hasImage?-1:0}))}),[t]),E=a.useCallback((function(e){e.preventDefault(),d(!0);var t=e.target.value.trim();k(t);var n=U.filter((function(e){var n;return e.asset.name.toLowerCase().includes(t.toLowerCase())||(null===(n=e.asset.ticker)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))||e.asset.id.toLowerCase().includes(t.toLowerCase())}));m(n)}),[U]);Object(a.useEffect)((function(){m(U)}),[U]);var y,L;y=function(){d(!1),N(!1)},L=_,Object(a.useEffect)((function(){var e=function(e){L.current&&!L.current.contains(e.target)&&y(e)};return L.current&&document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[y,L]);var D=a.useMemo((function(){return s&&!u&&!g}),[s,u,g]);return Object(b.jsxs)("div",{className:"search-asset-container",ref:_,children:[Object(b.jsxs)("div",{className:"search-input-wrapper ".concat(D?"hide-icon":""),children:[Object(b.jsx)("input",{value:S,onFocus:function(){N(!0)},onBlur:function(){N(!1)},onChange:E,className:"search-input input ".concat(D?"transparent":""),type:"text",placeholder:"Type asset name"}),Object(b.jsx)("button",{className:"search-input-arrow ".concat(u?"active":""),onClick:function(e){e.preventDefault(),d(!u)}}),D&&Object(b.jsx)(h,{className:"in-input",balance:s,inInput:!0})]}),u&&Object(b.jsx)("ul",{className:"search-input-dropdown",children:p.map((function(e){return Object(b.jsx)(h,{balance:e,onSelectItem:function(e){d(!1),n(e),i(e),k("")}},e.asset.id)}))})]})},x=n(154),g=n(38),N=function(e,t){var n=Object(a.useState)([]),c=Object(j.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){if(e&&t){var n,a,c=function(e){var t=Object.create(null);return e.forEach((function(e){if(!e.length)return null;var n=e.map((function(e){return e.replace(/\s/g,"").replace(/"/g,"")})),a=Object(j.a)(n,2),c=a[0],r=a[1];if(!c||!r)return null;t[c]||(t[c]=[]),t[c].push(r)})),t}(Object(x.parse)(e||"").data),i=[];Object.keys(c).forEach((function(e){var n=c[e].map((function(e){try{return function(e){var t=e.replace(new RegExp("\\,","g"),"").replace(new RegExp("\\."),".").replace(",",".");return/^([0-9]+\.)?[0-9]+$/.test(t)?new g.BigNumber(t):new g.BigNumber(0)}(e)}catch(t){return new g.BigNumber(0)}})).reduce((function(e,t){return e.add(t)})),a=t.cloneWithTokens(n);i.push({recipient:e,amount:a})})),a=i,(n=r).length===a.length&&n.every((function(e,t){return e.recipient===a[t].recipient&&e.amount.eq(a[t].amount)}))||s(i)}}),[e,r]),{transfers:r}},w=(n(184),function(e){return Object(b.jsx)("div",{className:"loader",children:Object(b.jsx)("div",{className:"loader__dot"})})}),C=(n(185),function(e){var t=e.children;return Object(b.jsx)("div",{className:"plate error",children:t})}),S=n(155),k=function(e){var t=e.handleLogout,n=e.balances,c=e.signer,r=e.balancePending,s=a.useState(),i=Object(j.a)(s,2),d=i[0],f=i[1],O=a.useState(""),h=Object(j.a)(O,2),x=h[0],g=h[1],k=a.useState(""),_=Object(j.a)(k,2),U=_[0],E=_[1],y=a.useState(""),L=Object(j.a)(y,2),D=L[0],P=L[1],T=a.useCallback((function(e){e.preventDefault(),g(e.target.value),P("")}),[n]),B=a.useCallback((function(e){e.preventDefault(),E(e.target.value)}),[]),I=a.useCallback((function(e){f(e)}),[]),A=N(x,d).transfers,R=a.useCallback(function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(""),e.prev=2,e.next=5,c.massTransfer({transfers:A.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{amount:e.amount.getTokens().toNumber()})})),assetId:d.asset.id,attachment:S.libs.crypto.base58Encode(U)}).broadcast();case 5:return n=e.sent,e.next=8,c.waitTxConfirm(n,0);case 8:console.log("%c DONE","color: #e5b6ed"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),P(JSON.stringify(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[d,c,A,U]);return Object(b.jsxs)(m,{title:"Mass Transfer",handleLogout:t,onConfirm:R,confirmText:"Transfer",children:[Object(b.jsxs)("div",{className:"form__row",children:[Object(b.jsx)("label",{className:"form__label",children:"Select Asset"}),r?Object(b.jsx)(w,{}):Object(b.jsx)(v,{balances:n,onSelect:I})]}),Object(b.jsxs)("div",{className:"form__row",children:[Object(b.jsxs)("div",{className:"space-between",children:[Object(b.jsxs)("label",{className:"form__label",children:["Recipients, Amounts: ",A.length,"/100"]}),Object(b.jsx)("span",{className:"link",children:"Import CSV File"})]}),Object(b.jsx)("textarea",{className:"input textarea",placeholder:"Use a comma to separate recipient and the amount to send. Use\na new line for each recipient. \nExample:\nAddress1,Amount1\nAlias2,Amount2",onChange:T})]}),Object(b.jsxs)("div",{className:"form__row",children:[Object(b.jsx)("label",{className:"form__label",children:"Description"}),Object(b.jsx)("textarea",{className:"input textarea",placeholder:"Write a message",onChange:B})]}),D&&Object(b.jsx)(C,{children:D}),Object(b.jsx)(p,{className:"big",variant:"primary",onClick:R,disabled:0===A.length||r,children:"Transfer"})]})},_=n(156),U=n(157),E=(n(275),function(e){var t=e.onSelect,n=e.isPending;return Object(b.jsxs)("form",{className:"login-container",children:[Object(b.jsx)(d,{className:"login-title",children:"Connect wallet"}),Object(b.jsx)("div",{className:"buttons-wrapper",children:n?Object(b.jsx)(w,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"login-btn storage",onClick:function(e){e.preventDefault(),t(U.a)},children:"Waves Exchange Storage"}),Object(b.jsx)("button",{className:"login-btn email",onClick:function(e){e.preventDefault(),t(_.a)},children:"Email Account"})]})})]})}),y=n(158),L=Object(a.createContext)({nodeUrl:"",signerClientUrl:"",explorerUrl:"",dataServicesUrl:"",iconServiceUrl:""});L.displayName="ConfigContext";var D=L.Provider,P=n(171),T=(n(326),["onClose","children"]),B=c.a.createContext(null),I=function(e){var t=e.children,n=Object(a.useRef)(null),c=Object(a.useState)(null),r=Object(j.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){n.current&&i(n.current)}),[n.current]),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(B.Provider,{value:s,children:t}),Object(b.jsx)("div",{ref:n})]})},A=function(e){e.onClose;var t=e.children,n=(Object(f.a)(e,T),Object(a.useContext)(B));return n?s.a.createPortal(Object(b.jsx)("div",{className:"overlay",children:Object(b.jsx)("div",{className:"dialog",children:t})}),n):null},R=function(e){var t=Object(a.useContext)(L),n=Object(a.useState)(!1),c=Object(j.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),d=Object(j.a)(i,2),f=d[0],O=d[1],p=Object(a.useState)(""),m=Object(j.a)(p,2),h=m[0],v=m[1],x=Object(a.useState)(),g=Object(j.a)(x,2),N=(g[0],g[1]),w=Object(a.useState)(null),C=Object(j.a)(w,2),S=C[0],_=(C[1],Object(a.useState)(!0)),U=Object(j.a)(_,2),D=U[0],T=U[1],B=function(e,t){var n=Object(a.useRef)(null),c=Object(a.useState)({}),r=Object(j.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(!1),o=Object(j.a)(l,2),u=o[0],b=o[1],d=Object(a.useContext)(L);return Object(a.useEffect)((function(){var e;t?(b(!0),n.current=new P.Balance({iconUrl:d.iconServiceUrl,address:t,updateBalancesMs:5e3,dataServicesUrl:d.dataServicesUrl,nodeUrl:d.nodeUrl}),n.current.onUpdate((function(e){b(!1),i(e)}))):null===(e=n.current)||void 0===e||e.destroy()}),[t]),Object(a.useEffect)((function(){return function(){var e;null===(e=n.current)||void 0===e||e.destroy()}}),[]),{userBalances:s,balancePending:u}}(0,h),I=B.userBalances,R=B.balancePending,F=Object(a.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!1),v(""),(a=f||new y.Signer({NODE_URL:t.nodeUrl})).setProvider(new n),O(a),s(!0),e.prev=6,e.next=9,a.login();case 9:return c=e.sent,v(c.address),S&&S.res(Object(o.a)(Object(o.a)({},c),{},{signer:a})),T(!1),s(!1),e.abrupt("return",c);case 17:return e.prev=17,e.t0=e.catch(6),s(!1),S&&S.rej(),e.abrupt("return");case 22:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),[f,S]),M=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),f){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f.logout();case 6:v(""),O(null),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[f]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(k,{handleLogout:M,balances:I,signer:f,balancePending:R})}),D&&Object(b.jsx)(A,{onClose:function(){return T(!1)},children:Object(b.jsx)(E,{onSelect:F,onClose:function(){return T(!1)},isPending:r})})]})},F=n(327);var M=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(I,{children:Object(b.jsx)(D,{value:F,children:Object(b.jsx)(R,{})})})})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root"))},78:function(e,t){}},[[328,1,2]]]);
//# sourceMappingURL=main.86e12cf9.chunk.js.map