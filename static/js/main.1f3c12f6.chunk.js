(this.webpackJsonpmasstransfer=this.webpackJsonpmasstransfer||[]).push([[0],{177:function(e,t,n){},178:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},273:function(e,t,n){},278:function(e,t,n){},330:function(e,t,n){},331:function(e){e.exports=JSON.parse('{"nodeUrl":"https://nodes.waves.exchange","signerClientUrl":"https://waves.exchange/signer","explorerUrl":"https://wavesexplorer.com","dataServicesUrl":"https://waves.exchange/api/v1","iconServiceUrl":"https://waves.exchange/static/icons/assets"}')},332:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(67),s=n.n(r),i=(n(177),n(178),n(20)),o=n.n(i),u=n(30),l=n(53),d=n(6),f=(n(180),n(1)),b=function(e){var t=e.children,n=(e.priority,e.className);return Object(f.jsx)("h2",{className:"title ".concat(n),children:t})},j=(n(182),n(69)),p=(n(183),["children","variant","className"]),v=function(e){var t=e.children,n=e.variant,a=e.className,c=Object(j.a)(e,p);return Object(f.jsx)("button",Object(u.a)(Object(u.a)({className:"btn btn_".concat(n," ").concat(a)},c),{},{children:t}))},m=function(e){var t=e.title,n=e.handleLogout,a=e.children;e.onConfirm,e.confirmText;return Object(f.jsxs)("form",{className:"tx-form",children:[Object(f.jsxs)("div",{className:"space-between",children:[Object(f.jsx)(b,{children:t}),n&&Object(f.jsx)(v,{variant:"transparent",onClick:function(e){e.preventDefault(),n()},children:"Log Out"})]}),a]})},O=(n(184),n(185),["#39a12c","#6a737b","#e49616","#008ca7","#ff5b38","#ff6a00","#c74124","#00a78e","#b01e53","#e0c61b","#5a81ea","#72b7d2","#a5b5c3","#81c926","#86a3bd","#c1d82f","#5c84a8","#267e1b","#fbb034","#ff846a","#47c1ff","#00a0af","#85d7c6","#8a7967","#26c1c9","#72d28b","#5B1909","#264764","#270774","#8763DE","#F04085","#1E6AFD","#FF1E43","#D3002D","#967400","#264163"]),h=function(e){var t=e.asset,n=t.name.toString().charAt(0).toUpperCase(),a=function(e){var t=e.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t}),0);return O[t%O.length]}(t.id),c=Math.round(.43*(Number(24)||0));return Object(f.jsx)("div",{className:"asset-logo",children:Object(f.jsx)("div",{className:"asset-logo__logo",style:{backgroundColor:a,fontSize:c},children:n})})},x=function(e){var t=e.balance,n=e.onSelectItem,a=e.className,c=e.inInput,r=void 0!==c&&c;return Object(f.jsxs)("li",{className:"search-input-dropdown__item ".concat(a),onClick:function(){n&&n(t)},children:[Object(f.jsxs)("div",{className:"search-input-dropdown__meta-wrapper",children:[t.asset.icon?Object(f.jsx)("span",{className:"search-input-dropdown__asset-icon",style:{backgroundImage:"url('".concat(t.asset.icon,"')")}}):Object(f.jsx)(h,{asset:t.asset}),Object(f.jsx)("span",{className:"search-input-dropdown__asset-ticker",children:t.asset.ticker||t.asset.name}),Object(f.jsx)("span",{className:"search-input-dropdown__asset-name",children:t.asset.displayName})]}),!r&&Object(f.jsx)("div",{className:"search-input-dropdown__asset-balance",children:t.toFormat()})]},t.asset.id)},g=function(e){var t=e.balances,n=e.onSelect,c=e.selected,r=a.useState(),s=Object(d.a)(r,2),i=s[0],o=s[1],u=a.useState(!1),l=Object(d.a)(u,2),b=l[0],j=l[1],p=a.useState([]),v=Object(d.a)(p,2),m=v[0],O=v[1],h=a.useState(!1),g=Object(d.a)(h,2),N=g[0],w=g[1],C=a.useState(""),S=Object(d.a)(C,2),k=S[0],y=S[1],E=a.useRef(),_=a.useMemo((function(){return Object.values(t).sort((function(e,t){return e.asset.hasImage?-1:0}))}),[t]);a.useEffect((function(){(null===c||void 0===c?void 0:c.asset.id)!==(null===i||void 0===i?void 0:i.asset.id)&&o(c)}),[c,i]);var U=a.useCallback((function(e){e.preventDefault(),j(!0);var t=e.target.value.trim();if(y(t),t){var n=_.filter((function(e){var n;return e.asset.name.toLowerCase().includes(t.toLowerCase())||(null===(n=e.asset.ticker)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))||e.asset.id.toLowerCase().includes(t.toLowerCase())}));O(n)}else O(_)}),[_]);Object(a.useEffect)((function(){O(_)}),[_]);var L,D;L=function(){j(!1),w(!1)},D=E,Object(a.useEffect)((function(){var e=function(e){D.current&&!D.current.contains(e.target)&&L(e)};return D.current&&document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[L,D]);var A=a.useMemo((function(){return i&&!b&&!N}),[i,b,N]);return Object(f.jsxs)("div",{className:"search-asset-container",ref:E,children:[Object(f.jsxs)("div",{className:"search-input-wrapper ".concat(A?"hide-icon":""),children:[Object(f.jsx)("input",{value:k,onFocus:function(){j(!0),w(!0)},onBlur:function(){w(!1)},onChange:U,className:"search-input input ".concat(A?"transparent":""),type:"text",placeholder:"Type asset name"}),Object(f.jsx)("button",{className:"search-input-arrow ".concat(b?"active":""),onClick:function(e){e.preventDefault(),j(!b)}}),A&&Object(f.jsx)(x,{className:"in-input",balance:i,inInput:!0})]}),b&&m.length>0&&Object(f.jsx)("ul",{className:"search-input-dropdown",children:m.map((function(e){return Object(f.jsx)(x,{balance:e,onSelectItem:function(e){j(!1),n(e),o(e)}},e.asset.id)}))})]})},N=n(156),w=n(38),C=function(e,t){var n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){e||s([])}),[e]),Object(a.useEffect)((function(){if(e&&t){var n=function(e){var t=Object.create(null);return e.forEach((function(e){if(!e.length)return null;var n=e.map((function(e){return e.replace(/\s/g,"").replace(/"/g,"")})),a=Object(d.a)(n,2),c=a[0],r=a[1];if(!c||!r)return null;t[c]||(t[c]=[]),t[c].push(r)})),t}(Object(N.parse)(e||"").data),a=[];Object.keys(n).forEach((function(e){var c=n[e].map((function(e){try{return function(e){var t=e.replace(new RegExp("\\,","g"),"").replace(new RegExp("\\."),".").replace(",",".");return/^([0-9]+\.)?[0-9]+$/.test(t)?new w.BigNumber(t):new w.BigNumber(0)}(e)}catch(t){return new w.BigNumber(0)}})).reduce((function(e,t){return e.add(t)})),r=t.cloneWithTokens(c);a.push({recipient:e,amount:r})})),function(e,t){var n,a,c,r;return e.length===t.length&&(null===(n=e[0])||void 0===n||null===(a=n.amount)||void 0===a?void 0:a.asset.id)===(null===(c=t[0])||void 0===c||null===(r=c.amount)||void 0===r?void 0:r.asset.id)&&e.every((function(e,n){return e.recipient===t[n].recipient&&e.amount.eq(t[n].amount)}))}(r,a)||s(a)}}),[e,r,t]),{transfers:r}},S=(n(186),function(e){return Object(f.jsx)("div",{className:"loader",children:Object(f.jsx)("div",{className:"loader__dot"})})}),k=(n(187),function(e){var t=e.children;return Object(f.jsx)("div",{className:"plate error",children:t})}),y=n(108),E=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){return t.current=function(){var e=document.createElement("input");return e.type="file",e.style.position="absolute",e.style.left="-100px",e.style.top="-100px",document.body.appendChild(e),e}(),t.current.addEventListener("change",(function(){return function(){var n=Object(d.a)(t.current.files,1)[0];if(n){if(!function(e){var t=e.name.split(".")[1];return t&&"csv"===t}(n))return e({data:{status:"error",type:"extension",message:"Wrong extension",file:n}}),null;e({data:{status:"ok",file:n}})}t.current.value=""}()})),function(){document.body.removeChild(t.current)}}),[e]),{onClick:function(){t.current.click()}}},_=(n(273),function(e){return e.map((function(e){return e.amount})).reduce((function(e,t){return t.add(e)}),e[0].amount.cloneWithTokens(0))}),U=function(e){var t=e.handleLogout,n=e.balances,c=e.signer,r=e.balancePending,s=a.useState(),i=Object(d.a)(s,2),b=i[0],j=i[1],p=a.useState(""),O=Object(d.a)(p,2),h=O[0],x=O[1],N=a.useState(""),w=Object(d.a)(N,2),U=w[0],L=w[1],D=a.useState(""),A=Object(d.a)(D,2),B=A[0],P=A[1],T=a.useCallback((function(e){e.preventDefault(),x(e.target.value),P("")}),[]),F=a.useCallback((function(e){e.preventDefault(),L(e.target.value)}),[]),I=a.useCallback((function(e){P(""),j(e)}),[]),R=E((function(e){var t=e.data;"ok"===t.status?function(e){var t=new FileReader;return new Promise((function(n,a){t.addEventListener("error",(function(e){a(e)})),t.addEventListener("abort",(function(e){a(e)})),t.addEventListener("load",(function(){n(t.result)}),!1),t.readAsBinaryString(e)}))}(t.file).then((function(e){x(e)})).catch((function(e){P(e)})):P("Wrong file extension")})).onClick,M=C(h.trim(),b).transfers,W=a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),P(""),M.length>100&&P("Any recipients after the first 100 will be ignored."),!M.length||!_(M).gt(n[b.asset.id])){e.next=6;break}return P("Insufficient funds."),e.abrupt("return");case 6:return e.prev=6,e.next=9,c.massTransfer({transfers:M.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{amount:e.amount.getCoins().toNumber()})})),assetId:b.asset.id,attachment:y.libs.crypto.base58Encode(y.libs.crypto.stringToBytes(U))}).broadcast();case 9:return a=e.sent,e.next=12,c.waitTxConfirm(a,0);case 12:console.log("%c DONE","color: green"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),P(JSON.stringify(e.t0,null,4));case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),[b,c,M,U]),J=a.useMemo((function(){return 0===M.length||r}),[M,r]);return Object(f.jsxs)(m,{title:"Mass Transfer",handleLogout:function(){t(),P(""),x(""),L(""),j(null)},onConfirm:W,confirmText:"Transfer",children:[Object(f.jsxs)("div",{className:"form__row",children:[Object(f.jsx)("label",{className:"form__label",children:"Select Asset"}),r?Object(f.jsx)(S,{}):Object(f.jsx)(g,{balances:n,onSelect:I,selected:b})]}),Object(f.jsxs)("div",{className:"form__row",children:[Object(f.jsxs)("div",{className:"space-between",children:[Object(f.jsxs)("label",{className:"form__label",children:["Recipients, Amounts: ",M.length,"/100"]}),Object(f.jsx)("span",{className:"link",onClick:R,children:"Import CSV File"})]}),Object(f.jsx)("textarea",{className:"input textarea",placeholder:"Use a comma to separate recipient and the amount to send. Use\na new line for each recipient. \nExample:\nAddress1,Amount1\nAlias2,Amount2",onChange:T,value:h})]}),Object(f.jsxs)("div",{className:"form__row",children:[Object(f.jsx)("label",{className:"form__label",children:"Description"}),Object(f.jsx)("textarea",{className:"input textarea",placeholder:"Write a message",onChange:F,value:U})]}),B&&Object(f.jsx)(k,{children:B}),Object(f.jsx)(v,{className:"big confirm-btn",variant:"primary",onClick:W,disabled:J,children:"Transfer"})]})},L=n(157),D=n(158),A=(n(278),function(e){var t=e.onSelect,n=e.isPending;return Object(f.jsxs)("form",{className:"login-container",children:[Object(f.jsx)(b,{className:"login-title",children:"Connect wallet"}),Object(f.jsx)("div",{className:"buttons-wrapper",children:n?Object(f.jsx)(S,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{className:"login-btn email",onClick:function(e){e.preventDefault(),t(L.a)},children:"Email Account"}),Object(f.jsx)("button",{className:"login-btn storage",onClick:function(e){e.preventDefault(),t(D.a)},children:"Waves Exchange Storage"})]})})]})}),B=n(159),P=Object(a.createContext)({nodeUrl:"",signerClientUrl:"",explorerUrl:"",dataServicesUrl:"",iconServiceUrl:""});P.displayName="ConfigContext";var T=P.Provider,F=n(172),I=(n(330),["onClose","children"]),R=c.a.createContext(null),M=function(e){var t=e.children,n=Object(a.useRef)(null),c=Object(a.useState)(null),r=Object(d.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){n.current&&i(n.current)}),[n.current]),Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(R.Provider,{value:s,children:t}),Object(f.jsx)("div",{ref:n})]})},W=function(e){e.onClose;var t=e.children,n=(Object(j.a)(e,I),Object(a.useContext)(R));return n?s.a.createPortal(Object(f.jsx)("div",{className:"overlay",children:Object(f.jsx)("div",{className:"dialog",children:t})}),n):null},J=function(e){var t=Object(a.useContext)(P),n=Object(a.useState)(!1),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),b=Object(d.a)(i,2),j=b[0],p=b[1],v=Object(a.useState)(""),m=Object(d.a)(v,2),O=m[0],h=m[1],x=Object(a.useState)(null),g=Object(d.a)(x,2),N=g[0],w=(g[1],Object(a.useState)(!0)),C=Object(d.a)(w,2),S=C[0],k=C[1],y=function(e,t){var n=Object(a.useRef)(null),c=Object(a.useState)({}),r=Object(d.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),u=Object(d.a)(o,2),l=u[0],f=u[1],b=Object(a.useContext)(P);return Object(a.useEffect)((function(){var e;t?(f(!0),n.current=new F.Balance({iconUrl:b.iconServiceUrl,address:t,updateBalancesMs:5e3,dataServicesUrl:b.dataServicesUrl,nodeUrl:b.nodeUrl}),n.current.onUpdate((function(e){f(!1),i(e)}))):null===(e=n.current)||void 0===e||e.destroy()}),[t]),Object(a.useEffect)((function(){return function(){var e;null===(e=n.current)||void 0===e||e.destroy()}}),[]),{userBalances:s,balancePending:l}}(0,O),E=y.userBalances,_=y.balancePending,L=Object(a.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(""),(a=j||new B.Signer({NODE_URL:t.nodeUrl})).setProvider(new n),p(a),s(!0),e.prev=5,e.next=8,a.login();case 8:return c=e.sent,h(c.address),N&&N.res(Object(u.a)(Object(u.a)({},c),{},{signer:a})),k(!1),s(!1),e.abrupt("return",c);case 16:return e.prev=16,e.t0=e.catch(5),s(!1),N&&N.rej(),e.abrupt("return");case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}(),[j,N]),D=Object(a.useCallback)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),j){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,j.logout();case 6:h(""),p(null),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[j]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"content",children:Object(f.jsx)(U,{handleLogout:D,balances:E,signer:j,balancePending:_})}),S&&Object(f.jsx)(W,{onClose:function(){return k(!1)},children:Object(f.jsx)(A,{onSelect:L,onClose:function(){return k(!1)},isPending:r})})]})},q=n(331);var z=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(M,{children:Object(f.jsx)(T,{value:q,children:Object(f.jsx)(J,{})})})})};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(z,{})}),document.getElementById("root"))},78:function(e,t){}},[[332,1,2]]]);
//# sourceMappingURL=main.1f3c12f6.chunk.js.map