(this.webpackJsonpmasstransfer=this.webpackJsonpmasstransfer||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},276:function(e,t,n){},327:function(e,t,n){},328:function(e){e.exports=JSON.parse('{"nodeUrl":"https://nodes.waves.exchange","signerClientUrl":"https://waves.exchange/signer","explorerUrl":"https://wavesexplorer.com","dataServicesUrl":"https://waves.exchange/api/v1","iconServiceUrl":"https://waves.exchange/static/icons/assets"}')},329:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(67),s=n.n(r),i=(n(176),n(177),n(20)),o=n.n(i),u=n(30),l=n(53),d=n(6),b=(n(179),n(1)),f=function(e){var t=e.children,n=(e.priority,e.className);return Object(b.jsx)("h2",{className:"title ".concat(n),children:t})},j=(n(181),n(69)),p=(n(182),["children","variant","className"]),m=function(e){var t=e.children,n=e.variant,a=e.className,c=Object(j.a)(e,p);return Object(b.jsx)("button",Object(u.a)(Object(u.a)({className:"btn btn_".concat(n," ").concat(a)},c),{},{children:t}))},O=function(e){var t=e.title,n=e.handleLogout,a=e.children;e.onConfirm,e.confirmText;return Object(b.jsxs)("form",{className:"tx-form",children:[Object(b.jsxs)("div",{className:"space-between",children:[Object(b.jsx)(f,{children:t}),n&&Object(b.jsx)(m,{variant:"transparent",onClick:function(e){e.preventDefault(),n()},children:"Log Out"})]}),a]})},v=(n(183),n(184),["#39a12c","#6a737b","#e49616","#008ca7","#ff5b38","#ff6a00","#c74124","#00a78e","#b01e53","#e0c61b","#5a81ea","#72b7d2","#a5b5c3","#81c926","#86a3bd","#c1d82f","#5c84a8","#267e1b","#fbb034","#ff846a","#47c1ff","#00a0af","#85d7c6","#8a7967","#26c1c9","#72d28b","#5B1909","#264764","#270774","#8763DE","#F04085","#1E6AFD","#FF1E43","#D3002D","#967400","#264163"]),h=function(e){var t=e.asset,n=t.name.toString().charAt(0).toUpperCase(),a=function(e){var t=e.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t}),0);return v[t%v.length]}(t.id),c=Math.round(.43*(Number(24)||0));return Object(b.jsx)("div",{className:"asset-logo",children:Object(b.jsx)("div",{className:"asset-logo__logo",style:{backgroundColor:a,fontSize:c},children:n})})},x=function(e){var t=e.balance,n=e.onSelectItem,a=e.className,c=e.inInput,r=void 0!==c&&c;return Object(b.jsxs)("li",{className:"search-input-dropdown__item ".concat(a),onClick:function(){n&&n(t)},children:[Object(b.jsxs)("div",{className:"search-input-dropdown__meta-wrapper",children:[t.asset.icon?Object(b.jsx)("span",{className:"search-input-dropdown__asset-icon",style:{backgroundImage:"url('".concat(t.asset.icon,"')")}}):Object(b.jsx)(h,{asset:t.asset}),Object(b.jsx)("span",{className:"search-input-dropdown__asset-ticker",children:t.asset.ticker||t.asset.name}),Object(b.jsx)("span",{className:"search-input-dropdown__asset-name",children:t.asset.displayName})]}),!r&&Object(b.jsx)("div",{className:"search-input-dropdown__asset-balance",children:t.toFormat()})]},t.asset.id)},g=function(e){var t=e.balances,n=e.onSelect,c=a.useState(),r=Object(d.a)(c,2),s=r[0],i=r[1],o=a.useState(!1),u=Object(d.a)(o,2),l=u[0],f=u[1],j=a.useState([]),p=Object(d.a)(j,2),m=p[0],O=p[1],v=a.useState(!1),h=Object(d.a)(v,2),g=h[0],N=h[1],w=a.useState(""),C=Object(d.a)(w,2),S=C[0],k=C[1],_=a.useRef(),E=a.useMemo((function(){return Object.values(t).sort((function(e,t){return e.asset.hasImage?-1:0}))}),[t]),y=a.useCallback((function(e){e.preventDefault(),f(!0);var t=e.target.value.trim();k(t);var n=E.filter((function(e){var n;return e.asset.name.toLowerCase().includes(t.toLowerCase())||(null===(n=e.asset.ticker)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))||e.asset.id.toLowerCase().includes(t.toLowerCase())}));O(n)}),[E]);Object(a.useEffect)((function(){O(E)}),[E]);var U,L;U=function(){f(!1),N(!1)},L=_,Object(a.useEffect)((function(){var e=function(e){L.current&&!L.current.contains(e.target)&&U(e)};return L.current&&document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[U,L]);var D=a.useMemo((function(){return s&&!l&&!g}),[s,l,g]);return Object(b.jsxs)("div",{className:"search-asset-container",ref:_,children:[Object(b.jsxs)("div",{className:"search-input-wrapper ".concat(D?"hide-icon":""),children:[Object(b.jsx)("input",{value:S,onFocus:function(){N(!0)},onBlur:function(){N(!1)},onChange:y,className:"search-input input ".concat(D?"transparent":""),type:"text",placeholder:"Type asset name"}),Object(b.jsx)("button",{className:"search-input-arrow ".concat(l?"active":""),onClick:function(e){e.preventDefault(),f(!l)}}),D&&Object(b.jsx)(x,{className:"in-input",balance:s,inInput:!0})]}),l&&Object(b.jsx)("ul",{className:"search-input-dropdown",children:m.map((function(e){return Object(b.jsx)(x,{balance:e,onSelectItem:function(e){f(!1),n(e),i(e),k("")}},e.asset.id)}))})]})},N=n(154),w=n(38),C=function(e,t){var n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){if(e&&t){var n,a,c=function(e){var t=Object.create(null);return e.forEach((function(e){if(!e.length)return null;var n=e.map((function(e){return e.replace(/\s/g,"").replace(/"/g,"")})),a=Object(d.a)(n,2),c=a[0],r=a[1];if(!c||!r)return null;t[c]||(t[c]=[]),t[c].push(r)})),t}(Object(N.parse)(e||"").data),i=[];Object.keys(c).forEach((function(e){var n=c[e].map((function(e){try{return function(e){var t=e.replace(new RegExp("\\,","g"),"").replace(new RegExp("\\."),".").replace(",",".");return/^([0-9]+\.)?[0-9]+$/.test(t)?new w.BigNumber(t):new w.BigNumber(0)}(e)}catch(t){return new w.BigNumber(0)}})).reduce((function(e,t){return e.add(t)})),a=t.cloneWithTokens(n);i.push({recipient:e,amount:a})})),a=i,(n=r).length===a.length&&n.every((function(e,t){return e.recipient===a[t].recipient&&e.amount.eq(a[t].amount)}))||s(i)}}),[e,r,t]),{transfers:r}},S=(n(185),function(e){return Object(b.jsx)("div",{className:"loader",children:Object(b.jsx)("div",{className:"loader__dot"})})}),k=(n(186),function(e){var t=e.children;return Object(b.jsx)("div",{className:"plate error",children:t})}),_=n(155),E=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){return t.current=function(){var e=document.createElement("input");return e.type="file",e.style.position="absolute",e.style.left="-100px",e.style.top="-100px",document.body.appendChild(e),e}(),t.current.addEventListener("change",(function(){return function(){var n=Object(d.a)(t.current.files,1)[0];if(n){if(!function(e){var t=e.name.split(".")[1];return t&&"csv"===t}(n))return e({data:{status:"error",type:"extension",message:"Wrong extension",file:n}}),null;e({data:{status:"ok",file:n}})}t.current.value=""}()})),function(){document.body.removeChild(t.current)}}),[e]),{onClick:function(){t.current.click()}}},y=function(e){var t=e.handleLogout,n=e.balances,c=e.signer,r=e.balancePending,s=a.useState(),i=Object(d.a)(s,2),f=i[0],j=i[1],p=a.useState(""),v=Object(d.a)(p,2),h=v[0],x=v[1],N=a.useState(""),w=Object(d.a)(N,2),y=w[0],U=w[1],L=a.useState(""),D=Object(d.a)(L,2),A=D[0],B=D[1],P=a.useCallback((function(e){e.preventDefault(),x(e.target.value),B("")}),[]),F=a.useCallback((function(e){e.preventDefault(),U(e.target.value)}),[]),T=a.useCallback((function(e){j(e)}),[]),I=E((function(e){var t=e.data;"ok"===t.status?function(e){var t=new FileReader;return new Promise((function(n,a){t.addEventListener("error",(function(e){a(e)})),t.addEventListener("abort",(function(e){a(e)})),t.addEventListener("load",(function(){n(t.result)}),!1),t.readAsBinaryString(e)}))}(t.file).then((function(e){x(e)})).catch((function(e){B(e)})):B("Wrong file extension")})).onClick,R=C(h,f).transfers,M=a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),B(""),e.prev=2,e.next=5,c.massTransfer({transfers:R.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{amount:e.amount.getTokens().toNumber()})})),assetId:f.asset.id,attachment:_.libs.crypto.base58Encode(y)}).broadcast();case 5:return n=e.sent,e.next=8,c.waitTxConfirm(n,0);case 8:console.log("%c DONE","color: green"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),B(JSON.stringify(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[f,c,R,y]),W=a.useMemo((function(){return 0===R.length||r||R.length>0}),[R,r]);return a.useEffect((function(){R.length>100&&B("Any recipients after the first 100 will be ignored.")}),[R]),Object(b.jsxs)(O,{title:"Mass Transfer",handleLogout:t,onConfirm:M,confirmText:"Transfer",children:[Object(b.jsxs)("div",{className:"form__row",children:[Object(b.jsx)("label",{className:"form__label",children:"Select Asset"}),r?Object(b.jsx)(S,{}):Object(b.jsx)(g,{balances:n,onSelect:T})]}),Object(b.jsxs)("div",{className:"form__row",children:[Object(b.jsxs)("div",{className:"space-between",children:[Object(b.jsxs)("label",{className:"form__label",children:["Recipients, Amounts: ",R.length,"/100"]}),Object(b.jsx)("span",{className:"link",onClick:I,children:"Import CSV File"})]}),Object(b.jsx)("textarea",{className:"input textarea",placeholder:"Use a comma to separate recipient and the amount to send. Use\na new line for each recipient. \nExample:\nAddress1,Amount1\nAlias2,Amount2",onChange:P,value:h})]}),Object(b.jsxs)("div",{className:"form__row",children:[Object(b.jsx)("label",{className:"form__label",children:"Description"}),Object(b.jsx)("textarea",{className:"input textarea",placeholder:"Write a message",onChange:F})]}),A&&Object(b.jsx)(k,{children:A}),Object(b.jsx)(m,{className:"big",variant:"primary",onClick:M,disabled:W,children:"Transfer"})]})},U=n(156),L=n(157),D=(n(276),function(e){var t=e.onSelect,n=e.isPending;return Object(b.jsxs)("form",{className:"login-container",children:[Object(b.jsx)(f,{className:"login-title",children:"Connect wallet"}),Object(b.jsx)("div",{className:"buttons-wrapper",children:n?Object(b.jsx)(S,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"login-btn email",onClick:function(e){e.preventDefault(),t(U.a)},children:"Email Account"}),Object(b.jsx)("button",{className:"login-btn storage",onClick:function(e){e.preventDefault(),t(L.a)},children:"Waves Exchange Storage"})]})})]})}),A=n(158),B=Object(a.createContext)({nodeUrl:"",signerClientUrl:"",explorerUrl:"",dataServicesUrl:"",iconServiceUrl:""});B.displayName="ConfigContext";var P=B.Provider,F=n(171),T=(n(327),["onClose","children"]),I=c.a.createContext(null),R=function(e){var t=e.children,n=Object(a.useRef)(null),c=Object(a.useState)(null),r=Object(d.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){n.current&&i(n.current)}),[n.current]),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(I.Provider,{value:s,children:t}),Object(b.jsx)("div",{ref:n})]})},M=function(e){e.onClose;var t=e.children,n=(Object(j.a)(e,T),Object(a.useContext)(I));return n?s.a.createPortal(Object(b.jsx)("div",{className:"overlay",children:Object(b.jsx)("div",{className:"dialog",children:t})}),n):null},W=function(e){var t=Object(a.useContext)(B),n=Object(a.useState)(!1),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),f=Object(d.a)(i,2),j=f[0],p=f[1],m=Object(a.useState)(""),O=Object(d.a)(m,2),v=O[0],h=O[1],x=Object(a.useState)(null),g=Object(d.a)(x,2),N=g[0],w=(g[1],Object(a.useState)(!0)),C=Object(d.a)(w,2),S=C[0],k=C[1],_=function(e,t){var n=Object(a.useRef)(null),c=Object(a.useState)({}),r=Object(d.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),u=Object(d.a)(o,2),l=u[0],b=u[1],f=Object(a.useContext)(B);return Object(a.useEffect)((function(){var e;t?(b(!0),n.current=new F.Balance({iconUrl:f.iconServiceUrl,address:t,updateBalancesMs:5e3,dataServicesUrl:f.dataServicesUrl,nodeUrl:f.nodeUrl}),n.current.onUpdate((function(e){b(!1),i(e)}))):null===(e=n.current)||void 0===e||e.destroy()}),[t]),Object(a.useEffect)((function(){return function(){var e;null===(e=n.current)||void 0===e||e.destroy()}}),[]),{userBalances:s,balancePending:l}}(0,v),E=_.userBalances,U=_.balancePending,L=Object(a.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(""),(a=j||new A.Signer({NODE_URL:t.nodeUrl})).setProvider(new n),p(a),s(!0),e.prev=5,e.next=8,a.login();case 8:return c=e.sent,h(c.address),N&&N.res(Object(u.a)(Object(u.a)({},c),{},{signer:a})),k(!1),s(!1),e.abrupt("return",c);case 16:return e.prev=16,e.t0=e.catch(5),s(!1),N&&N.rej(),e.abrupt("return");case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}(),[j,N]),P=Object(a.useCallback)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),j){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,j.logout();case 6:h(""),p(null),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[j]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(y,{handleLogout:P,balances:E,signer:j,balancePending:U})}),S&&Object(b.jsx)(M,{onClose:function(){return k(!1)},children:Object(b.jsx)(D,{onSelect:L,onClose:function(){return k(!1)},isPending:r})})]})},J=n(328);var q=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(R,{children:Object(b.jsx)(P,{value:J,children:Object(b.jsx)(W,{})})})})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(q,{})}),document.getElementById("root"))},78:function(e,t){}},[[329,1,2]]]);
//# sourceMappingURL=main.9665ca4c.chunk.js.map